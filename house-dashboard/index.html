<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Vert.x with SockJS</title>
    <script src="https://unpkg.io/sockjs-client@1.5.0/dist/sockjs.min.js"></script>
    <script src='https://unpkg.io/@vertx/eventbus-bridge-client.js@1.0.0-1/vertx-eventbus.js'></script>
    <script>
        var eb = new EventBus('http://localhost:8080/eventbus');
        eb.onopen = () => {
            // set a handler to receive a message
            eb.registerHandler('webserver.to.webclient', (error, message) => {
                let msg = JSON.parse(message.body); // Parse the message body
                console.log('received a message: ' + JSON.stringify(msg));
                decodeBase64Image(msg.measure);
            });
        }

        function decodeBase64Image(base64Image) {
            // Create a new Image object
            var img = new Image();
            // Set the source of the image to the base64 encoded string
            img.src = base64Image;
            // Append the image to the body or any desired location
            document.body.appendChild(img);
        }
    </script>
</head>

<body>
    <h3>Live Webcam</h3>
</body>
</html>